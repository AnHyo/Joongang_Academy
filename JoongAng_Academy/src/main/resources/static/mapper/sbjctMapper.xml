<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.joongAng.academy.dao.SbjctDAO">
	<select id="list" resultType="SbjctDTO" parameterType="HashMap">
		SELECT * FROM SBJCT_INFO
		WHERE 1=1
		<if test="searchnm != null">
			AND SBJCT_NM LIKE CONCAT('%',#{searchnm},'%')
		</if>
		<if test="searchuse != null">
			AND USE_YN LIKE CONCAT('%',#{searchuse},'%')
		</if>
		<if test="searchdel != null">
			AND DEL_YN LIKE CONCAT('%',#{searchdel},'%')
		</if>
	</select>
	<insert id="addsbj" parameterType="HashMap">
		INSERT INTO SBJCT_INFO
		SET
		SBJCT_NO = LPAD((SELECT maxf.maxno FROM (SELECT MAX(SBJCT_NO)+1 AS maxno FROM SBJCT_INFO) AS maxf), 4,'0'),
		SBJCT_NM = #{SBJCT_NM},
		SBJCT_EXPLN = #{SBJCT_EXPLN},
		USE_YN=#{USE_YN},
		EDU_HR=#{EDU_HR}
	</insert>

	<update id="delsbj" parameterType="Integer">
		UPDATE SBJCT_INFO SET
		DEL_YN ='Y'
		WHERE SBJCT_NO =#{rowcnt}
	</update>
	<update id="updatesbj" parameterType="HashMap">
		UPDATE SBJCT_INFO SET
		SBJCT_NM = #{SBJCT_NM},
		SBJCT_EXPLN = #{SBJCT_EXPLN},
		USE_YN=#{USE_YN},
		DEL_YN=#{DEL_YN},
		EDU_HR=#{EDU_HR}
		WHERE SBJCT_NO = #{SBJCT_NO}
	</update>
</mapper>